---
title: 计算机图形学阅读笔记
author: HanlyJiang
tags: 
  - 读书笔记
  - 计算机图形学
---

## 第二章-计算机图形硬件

### 视频显示设备

* **阴极射线管**（Cathode Ray Tube，CRT）
* **平板显示器**

#### 刷新式CRT

**基本工作原理：**

![image-20210429095740342](https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20210429095750.png)

* 由电子枪发射出的电子束（**阴极射线**）通过聚焦系统和偏转系统，射向屏幕上覆有荧光层的指定位置。
* 屏幕亮点产生：在电子束轰击的每个位置，荧光层都会产生一个小亮点。
* 保持图像：由于荧光层发射的光很快会衰减，因此必须采用某种方法来保持图像。
  * 一种方法是将图形信息作为电荷分布存储在CRT上，这种电荷分布用来保持荧光粉处于激活状态
  * **另外一种是快速控制电子束反复重画图像**。（用的较多）
* 上述保持图像过程中反复刷新图像的显示器称之为刷新式CRT，重复画图的频率称为刷新频率。

**详细工作原理&阴极射线是什么？**

<img src="https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20210429100340.png" alt="image-20210429100338731" style="zoom:67%;" />

* CRT电子枪的主要元件是受热激发的金属阴极和控制栅极。
* 电子束产生：通过给称为灯丝的线圈通电来加热阴极，引起受热的电子“沸腾出”阴极表面。
* 电子加速：在CRT封装内的真空里，带有负电荷的自由电子在较高的正点呀的作用下加速冲向荧光屏。该加速电压可由CRT封装内靠近荧光屏处充以正电荷的金属涂层生成，或者采用加速阳极。
* 电子束强度控制（显示亮度控制）： 受设置在控制栅极上的电压电平控制。控制栅极是一个金属圆筒，紧挨着阴极安装。若在控制栅极上加上较高的负电压，则将阻止电子活动从而截断电子束，使之停止从控制栅极末端的小孔通过。 如施以较低的负电压，则仅仅较少了通过的电子数量，由于荧光层发射光的强度依赖于轰击屏幕的电子数量，因此可以通过改变控制栅极的电压来控制显示的光强。可以使用图形软件命令来设定各个屏幕位置的亮度级。
* 聚焦：控制电子束在轰击荧光层时汇聚到一个小点，否则由于电子互相排斥，电子束在靠近屏幕时会散开。
  * 聚焦可用电场实现，也可以用磁场实现。
  * 在高精度的系统中，还使用附加的聚焦硬件，以保持电子束冷聚焦到所有屏幕位置。因为多数CRT弯曲的部分直径大于从聚焦系统到屏幕中心的距离，所以电子束聚焦到屏幕不同点所经过的距离是不同的。因此，电子书只能在屏幕中心正确聚焦。当电子束移到屏幕边框时，所显示的图像会变得模糊。
* 电子束的偏转受电场或磁场控制。CRT通常配备一个在其封装外部的磁性偏转线圈，使用两对线圈，线圈产生的磁场造成对应方向的偏转力，该力正交于磁场方向，也垂直于电子束的行进方向。以对线圈实现水平偏转，另一对实现垂直偏转。调节通过线圈的电流可以得到适当的偏转量。

![image-20210429101617626](https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20210429101619.png)

* 显示： 通过将CRT电子束的能量转移到荧光层，就可以轻松在屏幕上形成亮点。当电子束的电子撞击到荧光层并停止运动，其动能被荧光层吸收。电子束能量的一部分因摩擦而转换为热能，余下的部分导致荧光层电子的电子跃迁到较高的量子能级。经过一段短暂的时间之后，激活的荧光层释放了较小的光能，开始回落到自身的稳定状态。我们在屏幕上看到的是所有的电子发光的组合效应。

**余晖**

CRT采用的荧光层有着不同的类型，这些荧光层除了颜色之外，主要差异是它们的**余晖（persistence）时间**：当CRT电子束移走后，它们将继续发光多长时间。余晖时间定义成从屏幕发光到衰减为其原亮度十分之一的时间。

较短的余晖时间的荧光层，需要较高的刷新速率来保持屏幕图形不闪烁。

短余晖的荧光层适用于动画，长余晖的适用于显示高复杂度静态图形。

**分辨率**

CRT无重叠显示的最多点数称之为分辨率（resolution）。

#### 光栅扫描显示器

使用CRT的普通图形监视器是基于电视技术的 **光栅扫描显示器**（raster-scan display）。

* 在光栅扫描系统中，电子束横向扫描屏幕，一次一行，从顶到底依次进行。每一行称为一个扫描行。当电子束横向沿着每一行移动时，电子束的强度不断变化，从而建立亮点组成的一个图案。

* 图形定义保存在称为**刷新缓存**（refresh buffer）或 **帧缓存**（frame buffer）的存储器中，这里的桢指的整个屏幕范围。该存储器保存一组对应屏幕所有点的强度值。电子束在屏幕上逐点移动时由从刷新缓存中取出的强度值控制其强度。

* 每个可由电子束点亮的屏幕点称为一个像素（pixel或pel，是picture element的简写）。

* 刷新缓存用来存储屏幕颜色值，因此也称为**颜色缓存**（color buffer）。除了颜色以外，像素的其他信息也存储在缓存中，因而不同的缓存区域有时也统称为帧缓存。

* 缓存深度，位平面，位图：光栅系统可以显示的颜色或灰度等级依赖于CRT使用的荧光粉及每一像素对应的桢缓存中的位数。对于黑白系统来说，每一屏幕点的像素只需要一位来控制，如果需要更多的强度等级，就需要提供附加位，高性能的系统中每一个像素可多达24位，这时分辨率1024x1024的屏幕要使用3MB的刷新缓存。每个像素的位数也被称之为缓存**深度**，或者**位平面**数。每像素一位的桢缓存通常称为**位图**（bitmap），每像素多位的桢缓存称为**像素图**（pixmap），这些术语也用来表述任意个二进制的阵列或者彩色阵列像素图。

* 刷新率：在每秒24帧以下时，我们会感觉到屏幕上相邻图像之间有间隙，即图像出现闪烁。现在多数显示器使用每秒60-80帧的刷新率，部分系统达到每秒120帧的刷新率。我们可以将每秒60帧的刷新率简单的称为60Hz。

#### 平板显示器

我们可以把平板显示器分为两类： **发射显示器**（emissive display）和**非发射显示器**（nonemissive display）。 

* 发射显示器是将**电能转换为光能的设备**，如等离子体显示板，薄膜光电显示器及发光二极管都是发射显示器的实例。
* 非发射显示器利用光学效应将太阳光或者来自某些其他**光源的光转换为图形模式**。如液晶设备则是非发射显示器的最重要的例子。

**发光二极管-LED**（light-emitting diode，LED） - 发射设备

二极管以矩阵排列形式形成显示器的像素位置，图形的定义存储在刷新缓存中，如同CRT的扫描线刷新一样，信息从刷新缓存中读出，并转换为电压电平，然后应用与二极管，在显示器上产生发光图案；

**液晶显示器-LCD**（liquid-crystal display，LCD）- 非发射设备

通常用于小型系统，这些非发射设备生成图形的原理是，通过能阻塞或者传递光的液晶材料，传递来自周围的或者内部光源的偏振光。（📒这就是为什么需要背光吧）

液晶是指这些化合物具有晶状结构的分子，并且可以像液体一样流动。一般由**无源矩阵（passive-matrix）**LCD和**激活矩阵（active-matrix）**LCD两种显示器。

### 光栅扫描系统

![image-20210429110053515](https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20210429110055.png)

#### 视频控制器

#### 光栅扫描显示处理器

![image-20210429110310612](../../../../../../../Application Support/typora-user-images/image-20210429110310612.png)

上图是一种建立光栅系统的方法，其中包含独立的显示处理器，有时也称显示控制器或者显示协处理器，其用途是使CPU从图形的复杂处理中解脱出来。（📒也就是GPU）。

GPU的主要任务是将应用程序给出的图形定义数字化为一组像素强度值，并存放在桢缓存中，这个数字化过程称为**扫描转换**（scan conversion）。扫描转换将给定的直线和其他集合对象的图形命令转换为一组与屏幕像素位置对应的离散点。

GPU也能执行某些附加的操作，包括生成各种线型，显示彩色区域及对显示对象执行某些变换和管理。

为了减少光栅系统中对存储量的需求，使用了将桢缓存组织成链表并且对强度信息进行编码的方法，一般有如下两种：

* **行程长度编码**（run-length encoding）：将每行扫描线作为一组整数来存储，每对中的一个整数指示强度值，另一个整数设定该扫描线上具有此强度的相邻像素。
* **单元编码**（cell encoding）：将光栅按一块块矩形区域编码。
* 由于存储价格的下降，桢缓存的大小不再是限制，所以一般应用单元编码。

## 第12章 计算机动画

创建动画序列有两种基本方法： **实时动画**（real-time animation） 和 **逐帧动画**（frame-by-frame animation）。

* 实时动画的每个片段在生成之后就立即播放，因此动画生成的速率必须符合刷新频率的约束；
* 逐帧动画的每一帧是单独生成和存储的，然后这些帧可以以实时回放模式连贯的显示出来。

简单的动画可以实时生成，而复杂的动画生成的要慢的多，通常逐帧生成；有些应用不论动画复杂与否，始终要求生成实时的计算机动画，在这些场合，我们常常采用专用的软件系统来快速生成复杂的动画序列；

### 计算及动画的光栅方法

如果需要实时生成动画，产生运动帧的速度必须足够快，以保证显示出连续的运动序列。对于复杂的场景，一个刷新周期的大部分时间被用来创建动画的一帧。因此先生成的对象在刷新周期内显示的时间较长，而在刷新周期的末期生成的对象几乎刚显示出来就消失了。（❓）进而，对于很复杂的场景，创建一个真所需的时间大于一个刷新周期，这将导致运动漂移和帧破裂的显示缺陷，由于屏幕显示是通过刷新缓存中被连续修改的像素值来生成的，我们可以利用光栅屏幕刷新过程中的某些特性来快速产生运动序列。

> 问题：为什么"因此先生成的对象在刷新周期内显示的时间较长，而在刷新周期的末期生成的对象几乎刚显示出来就消失了"
> 
> 自我回答：刷新频率固定60HZ，就是说1s内显示60帧，没一帧有16ms的时机被显示，如果生成的帧耗费了太多时间，那么供它显示的时间就被压占了。

#### 双缓存

在光栅系统中生成实时动画的一种方法是使用两个刷新缓存（成为双缓存）。初始状态时，在第一个缓存中创建动画的第一帧；然后当用该缓存中的帧刷新屏幕时，在第二个缓存中创建下一帧；当下一帧创建完成后，互换两个缓存的角色；因而刷新进程开始使用第二个缓存中的帧来刷新屏幕，同时在第一个缓存中继续创建下一帧。这种轮换缓存的操作贯穿于整个动画显示的过程中。支持双缓存的图形库通常提供一个激活双缓存的函数和一个互换缓存角色的函数。

#### 用光栅操作生成动画

使用矩形像素阵列的块移动可以为有限的应用生成实时光栅动画。游戏程序经常使用这种动画技术。

### 动画序列的设计

创建动画序列是一项复杂的工作，特别是包含一个情节串和多个对象时，每个对象都可能以不同的方式运动。通常，一个动画序列按照以下几步进行设计：

* 故事情节拆分
* 对象定义
* 关键帧描述
* 插值帧的生成

**情节板（storyboard）** 是动作的概述，它将一个运动序列定义为一组即将发生的事件。根据目标动画的类型，情节板可以由一组粗略的素描加上对运动的简单描述组成，也可以是一个关于动作的基本思路的列表。最初，运动的素描被贴在大板上又来全面观察动画项目，因而被称为情节板。

为动作的每一个参加者给出对象定义（object definintion）。
